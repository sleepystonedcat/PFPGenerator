<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SLEEPYâ€¢STONEDâ€¢CAT</title>
  <link rel="stylesheet" href="https://unpkg.com/98.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: url('https://web.archive.org/web/20091027034121/http://www.geocities.com/jessdchick/BACKGROUNDanimatedchangingcolorstars.gif') repeat;
       -webkit-touch-callout: none; 
    -webkit-user-select: none;
     -khtml-user-select: none; 
       -moz-user-select: none; 
        -ms-user-select: none;
            user-select: none; 
                                  
    }
    #container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    .window {
      flex-direction: column;
      align-items: center;
    }
    .window title-bar {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #canvas {
      border: 1px solid #000;
      cursor: default;
    }
    #sliderContainer {
      display: none;
      margin-top: 20px;
    }
    #slider {
      width: 300px;
    }
    #bottom-container {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
    }
    #buttonContainer {
      display: flex;
      justify-content: center;
      gap: 10px; /* Add space between buttons */
    }
    #flipButtonContainer {
      display: flex;
      justify-content: center;
      gap: 10px; /* Add space between buttons */
    }
  </style>
</head>
<body>
  <img src="https://files.catbox.moe/cfd63d.gif">
  <br><br>
  <div id="container">
    <div class="window">
      <div class="title-bar">
        <div class="title-bar-text">PFP Generator v1.1</div>
      </div>
      <div class="window-body">
        <fieldset>
          <label for="upload">Upload Background Image:</label>
          <input type="file" id="upload" class="input-file" accept="image/*">
        </fieldset>
        <br>
        <button id="overlayBtn" class="button" disabled>Add $sleepy cat</button>
        <br><br>
        <canvas id="canvas"></canvas>
        <div id="sliderContainer">
          <p>Drag the cat around with your mouse!</p>
          <label for="slider">Resize Sleepy Cat</label>
          <input type="range" id="slider" min="10" max="200" value="100">
          <br><br>          <br>
          <div id="buttonContainer">
            <div id="flipButtonContainer">
              <button id="flipHorizontalBtn" class="button" disabled>Flip Horizontally</button>
              <button id="flipVerticalBtn" class="button" disabled>Flip Vertically</button>
                       <button id="saveBtn" class="button" disabled>Save Image</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br>
    <img src="https://anlucas.neocities.org/hash_now.gif">
    <img src="https://cyber.dabamos.de/88x31/bestviewedcomp.gif">
   <img src="https://cyber.dabamos.de/88x31/freencool.gif">
  <br>
  <div id="bottom-container">
    <div class="window">
      <div class="title-bar">
        <div class="title-bar-text">OFFICIAL LINKS</div>
      </div>
      <div class="window-body">
        <fieldset>
          <p><b>Socials:</b></p>
          Telegram: <a href="https://t.me/SLEEPYSTONEDCAT" target="_blank">t.me/SLEEPYSTONEDCAT</a><br><br>
          Twitter: <a href="x.com/SLEEPYSTONEDCAT" target="_blank">x.com/SLEEPYSTONEDCAT</a>
          <br><br><br>
        </fieldset>
        <br>
        <fieldset>
          <marquee>ðŸ’¤ BUY $SLEEPY ðŸ’¤</marquee>
          <p><b>Secondary:</b></p>
          <a href="https://magiceden.io/runes/SLEEPY%E2%80%A2STONED%E2%80%A2CAT" target="_blank">MagicEden</a><br><br>
          <a href="https://unisat.io/runes/market?tick=SLEEPY%E2%80%A2STONED%E2%80%A2CAT" target="_blank">Unisat</a><br><br>
          <a href="https://www.okx.com/web3/marketplace/runes/token/SLEEPY%E2%80%A2STONED%E2%80%A2CAT/848624:2006" target="_blank">OKX</a><br><br>
          <marquee direction="right">ðŸ’¤ BUY $SLEEPY ðŸ’¤</marquee>
        </fieldset>
      </div>
    </div>
  </div>
  <script>
    const uploadInput = document.getElementById('upload');
    const overlayBtn = document.getElementById('overlayBtn');
    const saveBtn = document.getElementById('saveBtn');
    const flipHorizontalBtn = document.getElementById('flipHorizontalBtn');
    const flipVerticalBtn = document.getElementById('flipVerticalBtn');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const sliderContainer = document.getElementById('sliderContainer');
    const slider = document.getElementById('slider');
    const windowElement = document.querySelector('.window');

    let backgroundImage = null;
    let overlayImage = null;
    let isDragging = false;
    let startX, startY, startWidth, startHeight;
    let overlayX, overlayY, overlayWidth, overlayHeight;
    let isFlippedHorizontally = false;
    let isFlippedVertically = false;

    uploadInput.addEventListener('change', handleUpload);
    overlayBtn.addEventListener('click', handleOverlay);
    slider.addEventListener('input', resizeOverlay);
    saveBtn.addEventListener('click', saveImage);
    flipHorizontalBtn.addEventListener('click', flipHorizontally);
    flipVerticalBtn.addEventListener('click', flipVertically);

    function handleUpload(event) {
      const file = event.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          backgroundImage = new Image();
          backgroundImage.onload = function() {
            canvas.width = backgroundImage.width;
            canvas.height = backgroundImage.height;
            ctx.drawImage(backgroundImage, 0, 0);
            overlayBtn.disabled = false;
            updateWindowSize(backgroundImage.width, backgroundImage.height);
          };
          backgroundImage.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    }

    function handleOverlay() {
      const overlaySrc = 'https://i.imgur.com/bZT8j45.png'; 
      overlayImage = new Image();
      overlayImage.crossOrigin = "anonymous"; 
      overlayImage.onload = function() {
        const scale = Math.min(
          canvas.width / overlayImage.width,
          canvas.height / overlayImage.height
        );
        overlayWidth = overlayImage.width * scale;
        overlayHeight = overlayImage.height * scale;
        overlayX = (canvas.width - overlayWidth) / 2;
        overlayY = (canvas.height - overlayHeight) / 2; 
        redrawOverlay();
        sliderContainer.style.display = 'block';
        enableDragging();
        saveBtn.disabled = false;
        flipHorizontalBtn.disabled = false; 
        flipVerticalBtn.disabled = false; 
      };
      overlayImage.src = overlaySrc;
    }

    function resizeOverlay() {
      const scale = slider.value / 100;
      overlayWidth = overlayImage.width * scale;
      overlayHeight = overlayImage.height * scale;
      redrawOverlay();
    }

    function saveImage() {
      const dataUrl = canvas.toDataURL('image/png');
      const link = document.createElement('a');
      link.href = dataUrl;
      link.download = 'image.png';
      document.body.appendChild(link);
      link.click(); 
      document.body.removeChild(link);
    }

    function flipHorizontally() {
      isFlippedHorizontally = !isFlippedHorizontally;
      redrawOverlay();
    }

    function flipVertically() {
      isFlippedVertically = !isFlippedVertically;
      redrawOverlay();
    }

    function redrawOverlay() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(backgroundImage, 0, 0);
      ctx.save();
      ctx.translate(overlayX + overlayWidth / 2, overlayY + overlayHeight / 2);
      ctx.scale(
        isFlippedHorizontally ? -1 : 1, 
        isFlippedVertically ? -1 : 1
      );
      ctx.drawImage(
        overlayImage, 
        -overlayWidth / 2, 
        -overlayHeight / 2, 
        overlayWidth, 
        overlayHeight
      );
      ctx.restore();
    }

    function enableDragging() {
      canvas.addEventListener('mousedown', startDragging);
      canvas.addEventListener('mousemove', drag);
      canvas.addEventListener('mouseup', stopDragging);
      canvas.addEventListener('mouseout', stopDragging);
    }

    function startDragging(event) {
      const rect = canvas.getBoundingClientRect();
      const mouseX = event.clientX - rect.left;
      const mouseY = event.clientY - rect.top;

      if (
        mouseX > overlayX && mouseX < overlayX + overlayWidth &&
        mouseY > overlayY && mouseY < overlayY + overlayHeight
      ) {
        isDragging = true;
        startX = mouseX - overlayX;
        startY = mouseY - overlayY;
      }
    }

    function drag(event) {
      if (isDragging) {
        const rect = canvas.getBoundingClientRect();
        const mouseX = event.clientX - rect.left;
        const mouseY = event.clientY - rect.top;

        overlayX = mouseX - startX;
        overlayY = mouseY - startY;

        redrawOverlay();
      }
    }

    function stopDragging() {
      isDragging = false;
    }

    function updateWindowSize(width, height) {
      windowElement.style.width = `${width + 100}px`;
      windowElement.style.height = `${height + 275}px`;
    }
  </script>
</body>
</html>
